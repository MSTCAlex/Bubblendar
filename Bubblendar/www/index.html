<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">
    <title>Bubblendar</title>
    <!-- Bubblendar references -->
    <link href="css/index.css" rel="stylesheet" />
    <!-- Cordova reference, this is added to your app when it's built. -->
    <!-- NOTE: All scripts added here are Intellisense enabled!
         Please do NOT remove unnecessary scripts before production. -->
    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/parse-1.6.7.min.js"></script>        
    <script src="scripts/sessionManager.js"></script>
    <script src="scripts/opTask.js"></script>
    <script src="scripts/backBone.js"></script>
    <script src="scripts/index.js"></script>
    <script>
        function onLoad() {        
            startSession(); // Init sessionManager
            document.addEventListener("deviceready", onDeviceReady, true);

            var testobj = { className: "TestObject", test: { 1: "dif", name: "difsomething" } };
            testobj.id = "spyJKK2Hz1"; // Retrieve by id, will create new if left undefined
            var stask = new opTask(21, 21, onfin);
            stask.obj = testobj;
            stask.obj.timestamp = new Date(); // To force overwrite (Push) set time to now
            HandleBaseTask(stask);
            function onfin(success)
            {
                if(success)
                {
                    // obj.timestamp has been automatically updated at this point
                    // obj.id has been also updated (when creating new)
                    var test = stask.obj;
                }
                else
                {
                    stask.errors; // \n separated errors
                }
            }
        }

        function onDeviceReady() {
            // navigator.notification.alert("PhoneGap is working");
        }

        function callAnothePage() {
            window.location = "TaskBoard.html";
        }
        function gotoLogin()
        {            
            window.location = "login.html";
        }
    </script>
</head>
<body onload="onLoad();">   
    <button name="buttonClick" onclick="callAnothePage()">Navigate to Taskboard</button>    
    <button name="loginbtn" onclick="gotoLogin()">Login</button>
</body>
</html>